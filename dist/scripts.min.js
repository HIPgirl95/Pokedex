let pokemonRepository = (function () {
  let e = [];
  function t(e) {
    return fetch(e.detailsUrl)
      .then((e) => e.json())
      .then((t) => {
        (e.imageUrl = t.sprites.front_default),
          (e.height = t.height),
          (e.types = t.types);
      })
      .catch((e) => {
        console.error(e), alert(e);
      });
  }
  return {
    addListItem: function e(t) {
      let o = document.querySelector(".pokemon-list"),
        n = document.createElement("li"),
        i = document.createElement("button");
      (i.innerText = t.name),
        i.classList.add("pokemon-info", "btn", "btn-primary", "col-12"),
        i.setAttribute("data-bs-toggle", "modal"),
        i.setAttribute("data-bs-target", "#detailsModal"),
        i.classList.add("list-group-item"),
        n.classList.add("col-lg-4", "col-sm-6"),
        n.appendChild(i),
        o.appendChild(n),
        n.addEventListener("click", function (e) {
          pokemonRepository.showDetails(t);
        });
    },
    showDetails: function e(o) {
      t(o).then(() => {
        var e, t, n;
        let i, r, a;
        (e = o.name),
          (t = "Height: " + 10 * o.height + "cm"),
          (n = o.imageUrl),
          (i = document.querySelector(".modal-title")),
          (r = document.querySelector("#pokemon-height")),
          (a = document.querySelector("#pokemon-image")),
          (i.innerText = e),
          (r.innerText = t),
          (a.src = n);
      });
    },
    loadList: function t() {
      return fetch("https://pokeapi.co/api/v2/pokemon/?limit=36")
        .then((e) => e.json())
        .then(
          (t) => (
            t.results.forEach((t) => {
              let o = {
                name: t.name.charAt(0).toUpperCase() + t.name.slice(1),
                detailsUrl: t.url,
              };
              e.push(o);
            }),
            e
          )
        )
        .catch((e) => {
          console.error(e), alert(e);
        });
    },
    loadDetails: t,
  };
})();
pokemonRepository.loadList().then((e) => {
  e.forEach((e) => {
    pokemonRepository.addListItem(e);
  });
});
